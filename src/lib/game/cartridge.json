{
  "id": "blood-on-brass",
  "title": "The Midnight Lounge Jazz Club Case",
  "description": "You are Burt Macklin, FBI. A mysterious stranger hands you a worn notebook from the 1940sâ€”the secret case file of a forgotten murder. As you investigate the cold case, you realize a copycat killer is recreating the crimes in the present day. You must solve the past to stop a killer in the present.",
  "setting": "Modern-day USA, 2025",
  "gameType": "Limited Open World",
  "narratorName": "Narrator",
  "promptContext": "You are the System, responsible for interpreting player commands and translating them into valid game actions. Your role is purely technicalâ€”you analyze input and route it to the correct handler.\n\n**// 1. Your Primary Task: Command Interpretation**\nYour single most important task is to translate the player's natural language input into a single, valid game command from the 'Available Game Commands' list. Use the exact entity names provided in the 'Visible Names' lists.\n  - \"look at the book\" and \"examine notebook\" both become `examine \"Brown Notebook\"`.\n  - \"open the safe with the key\" and \"use my key to open the safe\" both become `use \"Deposit Box Key\" on \"Wall Safe\"`.\n  - \"move the painting\" or \"look behind the art\" both become `move \"Painting on the wall\"`.\n  - \"add the pipe to my inventory\", \"pick up the pipe\", \"grab the pipe\", and \"get the pipe\" all become `take \"Iron Pipe\"`.\n  - \"put the key in my pocket\" becomes `take \"Wall Safe Key\"`.\n  - \"check my stuff\" and \"what do I have\" both become `inventory`.\n  - \"hit the machine with the pipe\", \"smash the machine with pipe\", \"whack the coffee machine\", and \"break the machine with the pipe\" all become `use \"Iron Pipe\" on \"Coffee Machine\"`.\n\n**// 2. Your Response Protocol**\n- **Minimize System Messages:** For valid, actionable commands (take, use, examine, open, read, move), your `agentResponse` should be null or a minimal confirmation. The Narrator handles ALL descriptive output.\n  - **CORRECT:** `{\"agentResponse\": null, \"commandToExecute\": \"examine \\\"Painting on the wall\\\"\"}`\n  - **ALSO ACCEPTABLE:** `{\"agentResponse\": \"Examining the painting.\", \"commandToExecute\": \"examine \\\"Painting on the wall\\\"\"}`\n  - **INCORRECT:** `{\"agentResponse\": \"You walk over to examine the abstract painting. It's quite intriguing.\", \"commandToExecute\": \"examine \\\"Painting on the wall\\\"\"}`\n\n**// 3. Handling Invalid Input**\n- **Illogical/Destructive Actions:** For truly nonsensical actions (e.g., \"eat the key\", \"break the phone\"), your `agentResponse` MUST indicate the action cannot be performed and the `commandToExecute` MUST be \"invalid\".\n- **Strict Prohibition on Blocking:** You are strictly forbidden from blocking a standard game command like 'take', 'use', 'examine', 'open', 'read', or 'move'. If the player's intent matches one of these commands and a valid target, you MUST execute it.\n- **Conversational Input/Hints:** For conversational input (e.g., \"what now?\", \"help\"), your `agentResponse` should acknowledge the request, and the `commandToExecute` MUST be \"invalid\" or route to \"help\".\n  - **Example:** `{\"agentResponse\": \"Try examining objects or checking your inventory.\", \"commandToExecute\": \"invalid\"}`\n\n**// 4. Final Output**\nYour entire output must be a single, valid JSON object matching the output schema.\nYour reasoning must be a brief, step-by-step explanation of how you mapped the player's input to the chosen command.\n",
  "objectInteractionPromptContext": "You are the System, processing the player's interaction with the {{objectName}}. Map the player's input to one of the available actions based on the object's capabilities.",
  "storyStyleGuide": "You are a master storyteller and a brilliant editor. Your task is to transform a raw log of a text-based RPG into a captivating, well-written narrative chapter for a crime noir book.\n\n**Style Guide:**\n- Write in the third person, past tense.\n- Adopt a classic crime noir tone: gritty, descriptive, with a focus on atmosphere and internal thought. The main character is FBI agent Burt Macklin.\n- Aim for a rich, descriptive style. Don't just state what happened; paint a picture. Describe the smells, the sounds, the quality of the light, the texture of objects.\n- Expand on the events in the log. Weave them into a cohesive story. Describe the setting in detail, Burt's observations, his internal monologue, and the flow of conversation.\n- Smooth out the \"game-like\" elements. Instead of \"Burt examined the notebook,\" write something like, \"Burt's eyes fell upon a worn leather notebook resting on the table. It seemed to pulse with forgotten secrets, its leather cover softened by decades of handling.\"\n- Your job is to pick the important moments and dialogue that drive the plot forward and flesh them out. Omit repetitive actions or dead ends, but expand on the crucial scenes.\n- Target a length of approximately 1000-1500 words to create a substantial and immersive chapter.\n- Format the output as a single block of prose. Do not use markdown, titles, or headings within the story itself.\n",
  "systemMedia": {
    "take": {
      "success": {
        "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761771729/put_in_pocket_s19ume.png",
        "description": "Item goes into pocket",
        "hint": "putting item away"
      },
      "failure": {
        "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761934791/put_in_pocket_fail_sdmtiu.png",
        "description": "Cannot take this item",
        "hint": "unable to take"
      }
    }
  },
  "systemMessages": {
    "needsTarget": {
      "examine": "You need to specify what to examine.",
      "read": "You need to specify what to read.",
      "take": "You need to specify what to take.",
      "goto": "You need to specify where to go."
    },
    "inventoryEmpty": "Your pockets are empty. Nothing collected yet.",
    "cannotGoThere": "That path isn't available right now.",
    "noNextChapter": "The case file ends here. No further chapters available.",
    "textIllegible": "The text is too faded to decipher. Whatever was written here is lost to time.",
    "useDidntWork": "That approach doesn't work. The pieces don't fit.",
    "needsFocus": "You need to focus on a specific object first. Try examining or interacting with it.",
    "focusSystemError": "Focus system error. This shouldn't happen.",
    "wrongPassword": "Wrong passphrase. The lock remains sealed.",
    "cantDoThat": "That action isn't available.",
    "somethingWentWrong": "An unexpected error occurred."
  },
  "world": {
    "worldId": "world_metropolis",
    "name": "Metropolis Downtown",
    "cells": {
      "cell_0_1_0": {
        "cellId": "cell_0_1_0",
        "coord": {
          "x": 0,
          "y": 1,
          "z": 0
        },
        "type": "street",
        "isPassable": true
      },
      "cell_1_0_0": {
        "cellId": "cell_1_0_0",
        "coord": {
          "x": 1,
          "y": 0,
          "z": 0
        },
        "type": "street",
        "isPassable": true
      },
      "cell_1_1_0": {
        "cellId": "cell_1_1_0",
        "coord": {
          "x": 1,
          "y": 1,
          "z": 0
        },
        "type": "street",
        "isPassable": true,
        "structureId": "struct_cafe",
        "portalIds": [
          "portal_street_to_cafe"
        ]
      },
      "cell_1_2_0": {
        "cellId": "cell_1_2_0",
        "coord": {
          "x": 1,
          "y": 2,
          "z": 0
        },
        "type": "street",
        "isPassable": true
      },
      "cell_2_1_0": {
        "cellId": "cell_2_1_0",
        "coord": {
          "x": 2,
          "y": 1,
          "z": 0
        },
        "type": "street",
        "isPassable": true
      }
    }
  },
  "structures": {
    "struct_cafe": {
      "structureId": "struct_cafe",
      "name": "The Daily Grind",
      "kind": "cafe",
      "footprint": [
        "cell_1_1_0"
      ],
      "floors": [
        {
          "z": 0,
          "label": "Ground Floor",
          "locationIds": [
            "loc_cafe_interior"
          ]
        }
      ]
    }
  },
  "locations": {
    "loc_outside_cafe": {
      "locationId": "loc_outside_cafe",
      "name": "Outside The Daily Grind",
      "sceneDescription": "You are standing on a rain-slicked street in front of \"The Daily Grind\", a cozy-looking cafe. The smell of coffee mixes with the damp city air. The front door is right in front of you.",
      "coord": {
        "x": 1,
        "y": 1,
        "z": 0
      },
      "objects": [],
      "npcs": [],
      "entryPortals": [
        "portal_street_to_cafe"
      ],
      "exitPortals": []
    },
    "loc_cafe_interior": {
      "locationId": "loc_cafe_interior",
      "name": "The Cafe Interior",
      "sceneDescription": "You are inside The Daily Grind. It's a bustling downtown cafe, smelling of coffee and rain.",
      "sceneImage": {
        "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761156561/bustling_cafe_bluwgq.jpg",
        "description": "A view of the bustling cafe interior.",
        "hint": "bustling cafe"
      },
      "coord": {
        "x": 1,
        "y": 1,
        "z": 0
      },
      "objects": [
        "obj_brown_notebook",
        "obj_chalkboard_menu",
        "obj_magazine",
        "obj_bookshelf",
        "obj_painting",
        "obj_coffee_machine",
        "obj_player_phone"
      ],
      "npcs": [
        "npc_barista",
        "npc_manager"
      ],
      "entryPortals": [
        "portal_street_to_cafe"
      ],
      "exitPortals": [
        "portal_cafe_to_street"
      ],
      "zones": [
        {
          "title": "At the main counter",
          "objectIds": [
            "obj_chalkboard_menu",
            "obj_coffee_machine"
          ]
        },
        {
          "title": "On the wall",
          "objectIds": [
            "obj_painting",
            "obj_wall_safe"
          ]
        },
        {
          "title": "On a nearby table",
          "objectIds": [
            "obj_brown_notebook",
            "obj_magazine"
          ]
        },
        {
          "title": "In the corner",
          "objectIds": [
            "obj_bookshelf"
          ]
        }
      ],
      "transitionTemplates": [
        "You weave through the packed tables toward {entity}. A harried waiter nearly clips you with a tray of scones.",
        "You shoulder past a couple arguing over lattes, eyes fixed on {entity}.",
        "The din of conversation fades to white noise as you move toward {entity}.",
        "You sidestep a busboy balancing a tower of dirty dishes, making your way to {entity}.",
        "Coffee steam parts like a curtain as you cross the cafe toward {entity}.",
        "You navigate the maze of mismatched chairs, approaching {entity}. The floorboards creak under your weight.",
        "The jazz playing low from corner speakers follows you to {entity}. Saxophone. Always saxophone. The tune sounds familiar to you. ",
        "You step around puddles tracked in from the rain, heading for {entity}. The smell of wet wool and espresso.",
        "A businessman in a wrinkled suit nearly blocks your path. You slip past him toward {entity}.",
        "You can hear the espresso machine hissing angrily as you make your way to {entity}, dodging elbows and coffee cups."
      ]
    }
  },
  "portals": {
    "portal_street_to_cafe": {
      "portalId": "portal_street_to_cafe",
      "name": "Front Door",
      "kind": "door",
      "from": {
        "scope": "cell",
        "id": "cell_1_1_0"
      },
      "to": {
        "scope": "location",
        "id": "loc_cafe_interior"
      },
      "capabilities": {
        "lockable": false,
        "climbable": false,
        "vertical": false
      },
      "state": {
        "isLocked": false,
        "isOpen": true
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "It's the glass front door to the cafe. It's unlocked."
          },
          "fail": {
            "message": ""
          }
        }
      }
    },
    "portal_cafe_to_street": {
      "portalId": "portal_cafe_to_street",
      "name": "Exit Door",
      "kind": "door",
      "from": {
        "scope": "location",
        "id": "loc_cafe_interior"
      },
      "to": {
        "scope": "cell",
        "id": "cell_1_1_0"
      },
      "capabilities": {
        "lockable": false,
        "climbable": false,
        "vertical": false
      },
      "state": {
        "isLocked": false,
        "isOpen": true
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "It's the door leading back out to the street."
          },
          "fail": {
            "message": ""
          }
        }
      }
    }
  },
  "gameObjects": {
    "obj_brown_notebook": {
      "id": "obj_brown_notebook",
      "name": "Brown Notebook",
      "archetype": "Container",
      "description": "A very worn, leather-bound notebook rests on a table.",
      "capabilities": {
        "openable": true,
        "lockable": true,
        "breakable": false,
        "movable": false,
        "powerable": false,
        "container": true,
        "readable": true,
        "inputtable": true
      },
      "state": {
        "isOpen": false,
        "isLocked": true,
        "isBroken": false,
        "isPoweredOn": false,
        "currentStateId": "default"
      },
      "inventory": {
        "items": [
          "item_sd_card",
          "item_newspaper_article"
        ],
        "capacity": 2,
        "allowTags": [],
        "denyTags": []
      },
      "children": {
        "items": [
          "item_sd_card",
          "item_newspaper_article"
        ]
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759242347/Notebook_locked_ngfes0.png",
            "description": "A locked notebook.",
            "hint": "locked notebook"
          },
          "unlocked": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759242346/Notebook_unlocked_fpxqgl.jpg",
            "description": "An unlocked notebook.",
            "hint": "unlocked notebook"
          }
        },
        "sounds": {
          "onUnlock": "click.mp3"
        }
      },
      "input": {
        "type": "phrase",
        "validation": "Justice for Silas Bloom",
        "hint": "Stuck? Maybe this will help: https://airpg-minigames.vercel.app/games/the-notebook",
        "attempts": null,
        "lockout": null
      },
      "handlers": {
        "onExamine": {
          "conditions": [
            {
              "type": "STATE",
              "entityId": "obj_brown_notebook",
              "key": "isLocked",
              "equals": true
            }
          ],
          "success": {
            "message": "The leather is worn soft under your fingers, decades pressed into its surface. It smells of old paper, dust, and something darkerâ€”leather tanned with secrets. The brass clasp gleams cold, locked tight, guarding whatâ€™s inside.\n\nYour fingers trace it, metal biting faintly. No keyhole, no obvious way inâ€”just a mechanism waiting for something it has been expecting. A thrill runs through you. You donâ€™t know whatâ€™s inside, and yet its weight presses against your chest, heavy with possibility.\n\nUsually, you feel like the chess player, setting the moves. Now, strangely, you feel like the pawn in someone elseâ€™s gameâ€”small, exposed, uneasy, and yet drawn irresistibly.\n\nThe notebook radiates threat, subtle and insistent. Every crease and dent seems deliberate, alive with intentions. A flicker of fear curls with excitement, making every nerve tingle.\n\nHolding it, you feel the pulse of history brushing against your own, the quiet danger of secrets someone spent decades guarding. Alone, trembling slightly, you realize this momentâ€”this touch, this weightâ€”is a turning point. You donâ€™t know whatâ€™s inside, and that is precisely what makes it irresistible.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759242347/Notebook_locked_ngfes0.png",
              "description": "Locked leather notebook with brass clasp",
              "hint": "Needs a password phrase..."
            }
          },
          "fail": {
            "message": "Notebook's open. Brass clasp released. Inside: black SD cardâ€”modern, out of place against yellowed pages. Next to it, folded newspaper clipping, brown with age. Hidden deliberately.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759242346/Notebook_unlocked_fpxqgl.jpg",
              "description": "Unlocked notebook revealing hidden contents",
              "hint": "SD card and newspaper clipping"
            }
          }
        },
        "onTake": {
          "fail": {
            "message": "Evidence. Stays here. Try EXAMINING, OPENING, or entering the PASSWORD."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's for reading. Try OPENING it or unlocking with the PASSWORD."
          }
        },
        "onOpen": {
          "conditions": [
            {
              "type": "STATE",
              "entityId": "obj_brown_notebook",
              "key": "isLocked",
              "equals": false
            }
          ],
          "success": {
            "message": "Notebook's open. Brass clasp unfastened. In the crease: black SD cardâ€”modern, cold, out of place. Next to it: newspaper clipping, brown with age. Different eras. Hidden together. Someone archived the past on modern media.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759242346/Notebook_unlocked_fpxqgl.jpg",
              "description": "Open notebook with SD card and clipping",
              "hint": "Take the contents"
            },
            "effects": [
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "obj_brown_notebook",
                "patch": {
                  "isOpen": true,
                  "currentStateId": "unlocked"
                }
              }
            ]
          },
          "fail": {
            "message": "Brass clasp won't budge. Needs a PASSWORDâ€”phrase, not key. Someone made sure this stayed hidden.\n\nUse: /password <your guess>\n\nStuck? https://airpg-minigames.vercel.app/games/the-notebook"
          }
        },
        "onClose": {
          "conditions": [
            {
              "type": "STATE",
              "entityId": "obj_brown_notebook",
              "key": "isOpen",
              "equals": true
            }
          ],
          "success": {
            "message": "You close the cover. Brass clasp clicks shut. But why close it now?"
          },
          "fail": {
            "message": "Already closed and locked."
          }
        },
        "onMove": {
          "fail": {
            "message": "You slide it across the table. Nothing underneath. The secrets are inside, not under."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Evidence. Can't destroy it. Try the PASSWORD instead."
          }
        },
        "onRead": {
          "conditions": [
            {
              "type": "STATE",
              "entityId": "obj_brown_notebook",
              "key": "isLocked",
              "equals": false
            },
            {
              "type": "STATE",
              "entityId": "obj_brown_notebook",
              "key": "isOpen",
              "equals": true
            }
          ],
          "success": {
            "message": "Pages yellowed, ink faded. Most entries illegible. But the hidden itemsâ€”SD card, newspaper clippingâ€”those are what matter. TAKE them.",
            "effects": []
          },
          "fail": {
            "message": "Locked. Can't read it. Needs PASSWORD. Stuck? https://airpg-minigames.vercel.app/games/the-notebook"
          }
        },
        "onSearch": {
          "conditions": [
            {
              "type": "STATE",
              "entityId": "obj_brown_notebook",
              "key": "isLocked",
              "equals": false
            }
          ],
          "success": {
            "message": "You search the pages. SD card, newspaper clippingâ€”hidden in the center spread. TAKE them."
          },
          "fail": {
            "message": "Locked. Can't search. Need the PASSWORD."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Notebooks don't talk. Try OPENING it or the PASSWORD."
          }
        },
        "onUnlock": {
          "success": {
            "message": "Brass clasp clicks. Cover swings open, leather creaks. Inside: black SD cardâ€”modern, digital, anachronistic. Next to it: newspaper clipping, brown with decades. Past preserved twice. Paper survived seventy years. Data survives longer. Both waiting.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759242346/Notebook_unlocked_fpxqgl.jpg",
              "description": "Unlocked notebook revealing secrets",
              "hint": "The password worked"
            },
            "effects": [
              {
                "type": "SET_FLAG",
                "flag": "has_unlocked_notebook"
              },
              {
                "type": "REVEAL_ENTITY",
                "entityId": "item_sd_card"
              },
              {
                "type": "REVEAL_ENTITY",
                "entityId": "item_newspaper_article"
              }
            ]
          },
          "fail": {
            "message": "Wrong password. Lock stays shut. Think: what connects the clues?\n\nUse: /password <your guess>"
          }
        },
        "defaultFailMessage": "That won't work on the notebook. Try: EXAMINE, OPEN, READ, or use /password <phrase> to unlock it."
      },
      "fallbackMessages": {
        "default": "That's not going to work. It's a key piece of evidence.",
        "notOpenable": "You can't open that.",
        "locked": "It's locked.",
        "noEffect": "Using that on the notebook has no effect."
      },
      "design": {
        "authorNotes": "Central puzzle item for Chapter 1.",
        "tags": [
          "notebook",
          "book"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.0"
      }
    },
    "obj_chalkboard_menu": {
      "id": "obj_chalkboard_menu",
      "name": "Chalkboard Menu",
      "archetype": "Signage",
      "description": "There's a chalkboard menu near the counter with today's specials.",
      "capabilities": {
        "openable": false,
        "lockable": false,
        "breakable": true,
        "movable": true,
        "powerable": false,
        "container": false,
        "readable": true,
        "inputtable": false
      },
      "state": {
        "isOpen": false,
        "isLocked": false,
        "isBroken": false,
        "isPoweredOn": false,
        "currentStateId": "default"
      },
      "inventory": {
        "items": [],
        "capacity": 0
      },
      "children": {
        "items": [
          "item_iron_pipe"
        ]
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759603706/Chalkboard_h61haz.png",
            "description": "A chalkboard menu in a cafe.",
            "hint": "chalkboard menu"
          },
          "moved": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761261134/iron_pipe_bpcofa.png",
            "description": "The chalkboard has been moved aside, revealing a heavy iron pipe leaning against the wall.",
            "hint": "moved chalkboard with pipe"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "The wooden frame leaned crooked, chalk dust clinging to its corners. Brick peered through behind it, cold and stubborn.\n\nToday's special read: 'Three scones for the price of two.'\n\nA deal as sweet as justice.\n\nThat wordâ€”justiceâ€”hung heavy, deliberate. Someone had been here, leaving breadcrumbs.\n\nThe board didn't sit flush with the wall; a shadow slipped behind it, hiding something patient, waiting. The smell of bread and dust mixed, comforting and uneasy. \n\nIt wasnâ€™t just a menu. It was a message, a lure, a warning -  or was it not?",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759603706/Chalkboard_h61haz.png",
              "description": "Chalkboard menu with handwritten specials",
              "hint": "Not flush with the wall..."
            }
          }
        },
        "onTake": {
          "fail": {
            "message": "It's bolted furniture, not evidence. But you could MOVE it or READ the menu."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's for writing specials. You don't have chalk. Try READING it or MOVING it."
          }
        },
        "onOpen": {
          "fail": {
            "message": "It's a board, not a door. Try EXAMINING or MOVING it."
          }
        },
        "onClose": {
          "fail": {
            "message": "Nothing to close. Try MOVING it instead."
          }
        },
        "onMove": {
          "conditions": [
            {
              "type": "NO_FLAG",
              "flag": "has_moved_chalkboard"
            }
          ],
          "success": {
            "message": "The board scrapes across tile. Behind it: heavy iron pipe against exposed brick. Cold steel, rust at the joints. The kind of tool that solves problems without keys.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761261134/iron_pipe_bpcofa.png",
              "description": "Iron pipe revealed behind chalkboard",
              "hint": "Could be useful for breaking things..."
            },
            "effects": [
              {
                "type": "SET_FLAG",
                "flag": "has_moved_chalkboard",
                "value": true
              },
              {
                "type": "REVEAL_FROM_PARENT",
                "entityId": "item_iron_pipe",
                "parentId": "obj_chalkboard_menu"
              },
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "obj_chalkboard_menu",
                "patch": {
                  "currentStateId": "moved",
                  "isMoved": true
                }
              }
            ]
          },
          "fail": {
            "message": "Already moved. The pipe's gone. Nothing else hidden here."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Smashing the cafe's menu? That's vandalism, not detective work. Try MOVING it."
          }
        },
        "onRead": {
          "success": {
            "message": "Three scones for two. Coffee of the day: dark roast. Pastry special: lemon tart. And at the bottom, in different handwriting: 'A deal as sweet as justice.' Deliberate. A message.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759603706/Chalkboard_h61haz.png",
              "description": "Chalkboard menu closeup",
              "hint": "Someone wrote \"justice\" on purpose"
            }
          }
        },
        "onSearch": {
          "success": {
            "message": "You run your hand along the frame. It's angled away from the wall. Not flush. Try MOVING it."
          }
        },
        "onTalk": {
          "fail": {
            "message": "The board's not chatty. But you could READ it or MOVE it."
          }
        },
        "defaultFailMessage": "The chalkboard's a piece of the scene. Try: EXAMINE, READ, MOVE, or SEARCH it."
      },
      "fallbackMessages": {
        "default": "Probably best to leave the menu alone. It's not part of the case.",
        "notMovable": "It's a heavy stand, but you manage to slide it aside."
      },
      "design": {
        "authorNotes": "Contains the 'justice' clue and hides the iron pipe.",
        "tags": [
          "chalkboard",
          "menu",
          "board"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.2"
      }
    },
    "obj_magazine": {
      "id": "obj_magazine",
      "name": "Magazine",
      "archetype": "Prop",
      "description": "A discarded magazine lies on an empty table.",
      "capabilities": {
        "openable": false,
        "lockable": false,
        "breakable": true,
        "movable": true,
        "powerable": false,
        "container": false,
        "readable": true,
        "inputtable": false
      },
      "state": {
        "isOpen": false,
        "isLocked": false,
        "isBroken": false,
        "isPoweredOn": false,
        "currentStateId": "default"
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759603706/Newspaper_p85m1h.png",
            "description": "A magazine on a table.",
            "hint": "magazine"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Entertainment mag, this week's issue. Cover story: the murders. Metropolis craziness, same old. Not your case. Just atmosphere.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759603706/Newspaper_p85m1h.png",
              "description": "Local entertainment magazine",
              "hint": "Background noise, not evidence"
            }
          }
        },
        "onTake": {
          "fail": {
            "message": "Old news. Not evidence. Leave it. Try READING it if you're curious."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's for reading. Try EXAMINING or READING it."
          }
        },
        "onOpen": {
          "fail": {
            "message": "It's flat on the table. Try READING it instead."
          }
        },
        "onClose": {
          "fail": {
            "message": "Nothing to close. Try READING or MOVING it."
          }
        },
        "onMove": {
          "success": {
            "message": "You slide it aside. Coffee ring underneath. Sticky. Not the clue you hoped for."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Tearing up cafe property? That's not detective work. Try READING it."
          }
        },
        "onRead": {
          "success": {
            "message": "Murder coverage, local speculation, conspiracy theories. Metropolis loves its drama. Nothing connects to your case. Background noise."
          }
        },
        "onSearch": {
          "success": {
            "message": "You flip through pages. Ads, articles, event listings. Nothing relevant to the case. Just cafe reading."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Magazines don't chat. Try READING it or MOVING it."
          }
        },
        "defaultFailMessage": "The magazine's just atmosphere. Try: EXAMINE, READ, MOVE, or SEARCH it."
      },
      "fallbackMessages": {
        "default": "The magazine is old news. Let's stick to the facts of our case.",
        "notMovable": "You shift the magazine, revealing a sticky coffee ring. Not the clue you were hoping for."
      },
      "design": {
        "authorNotes": "Flavor item to build atmosphere.",
        "tags": [
          "magazine",
          "paper"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.0"
      }
    },
    "obj_bookshelf": {
      "id": "obj_bookshelf",
      "name": "Bookshelf",
      "archetype": "Furniture",
      "description": "A small bookshelf filled with used paperbacks is tucked into a corner.",
      "capabilities": {
        "openable": false,
        "lockable": false,
        "breakable": false,
        "movable": true,
        "powerable": false,
        "container": false,
        "readable": false,
        "inputtable": false
      },
      "state": {
        "isOpen": true,
        "isLocked": false,
        "isBroken": false,
        "isPoweredOn": false,
        "currentStateId": "default"
      },
      "inventory": {
        "items": [],
        "capacity": null
      },
      "children": {
        "items": [
          "item_book_deal",
          "item_book_time",
          "item_book_justice"
        ]
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759604596/Bookshelf_Cafe_kn4poz.png",
            "description": "A bookshelf in a cafe.",
            "hint": "bookshelf reading corner"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "The corner bookshelf leaned like it had watched too many years pass, a quiet witness to the people who drifted through this space. Its wood was scratched, nicked, and stubbornly dusty, edges softened by time and careless elbows. \n\nThe spines of worn paperbacks were pressed in haphazardly, some upright, some shoved sideways, each one a faint echo of someone who had lingered hereâ€”bored, curious, desperate, seeking distraction or solace.\n\nAmong the titles:\nðŸ“š The Art of the Deal\nðŸ“š A Brief History of Time\nðŸ“š Justice for My Love\n\nThat wordâ€”justiceâ€”hung in the air, deliberate, pressing against the dust and scratches like it had weight. The shelf wasnâ€™t just furniture. It had absorbed attention, fingers, sighs, and the restless patience of countless hands. You could almost feel the faint imprint of every reader, every idle moment, every flicker of hope or fleeting interest.\n\nIt smelled of old paper and neglect, of presence that had come and gone, leaving only a trace. The shelf held the roomâ€™s quiet history, not in words, but in the way it slumped, how it carried itself, how it seemed to remember everyone who had paused here. A monument, unassuming but certain, to all the people who had needed somethingâ€”anythingâ€”to pass the night, or to make sense of it.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759604596/Bookshelf_Cafe_kn4poz.png",
              "description": "Bookshelf with used paperbacks",
              "hint": "Justice... that word keeps appearing"
            },
            "effects": [
              {
                "type": "SET_FLAG",
                "flag": "has_seen_justice_book",
                "value": true
              }
            ]
          }
        },
        "onTake": {
          "fail": {
            "message": "It's furniture, not evidence. Try EXAMINING the books or SEARCHING the shelf."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's a shelf for books. Try EXAMINING, READING, or SEARCHING it."
          }
        },
        "onOpen": {
          "fail": {
            "message": "Open shelving. Nothing to open. Try READING or SEARCHING the books."
          }
        },
        "onClose": {
          "fail": {
            "message": "It's a shelf, not a cabinet. Try EXAMINING or SEARCHING it."
          }
        },
        "onMove": {
          "fail": {
            "message": "Solid oak, heavy. Not moving this alone. Try EXAMINING or READING the books."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Solid oak. You're not smashing this with bare hands. Besides, try EXAMINING the books first."
          }
        },
        "onRead": {
          "success": {
            "message": "You scan the spines. 'The Art of the Deal'. 'A Brief History of Time'. And... 'Justice for My Love'. Romance novel. But that wordâ€”justiceâ€”it's everywhere. Chalkboard, now this. Not coincidence.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759604596/Bookshelf_Cafe_kn4poz.png",
              "description": "Book titles on cafe bookshelf",
              "hint": "Justice appears again"
            },
            "effects": [
              {
                "type": "SET_FLAG",
                "flag": "has_seen_justice_book",
                "value": true
              }
            ]
          }
        },
        "onSearch": {
          "success": {
            "message": "You pull books out, check behind them, flip through pages. Mostly cafe readingâ€”travel guides, thrillers, business books. But 'Justice for My Love' stands out. Someone left breadcrumbs."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Books don't talk back. But you could READ them or EXAMINE the shelf."
          }
        },
        "defaultFailMessage": "It's a bookshelf. Try: EXAMINE, READ, or SEARCH the books."
      },
      "fallbackMessages": {
        "default": "It's just a bookshelf. Let's not get sidetracked.",
        "notMovable": "It's too heavy to move by yourself."
      },
      "design": {
        "authorNotes": "Contains the other 'justice' clue for the notebook.",
        "tags": [
          "books",
          "shelf"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.0"
      }
    },
    "obj_painting": {
      "id": "obj_painting",
      "name": "Painting on the wall",
      "archetype": "Surface",
      "description": "An abstract painting hangs on the wall.",
      "capabilities": {
        "openable": false,
        "lockable": false,
        "breakable": false,
        "movable": true,
        "powerable": false,
        "container": false,
        "readable": false,
        "inputtable": false
      },
      "state": {
        "isOpen": false,
        "isLocked": false,
        "isBroken": false,
        "isPoweredOn": false,
        "currentStateId": "default"
      },
      "children": {
        "objects": [
          "obj_wall_safe"
        ]
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759604943/picture_on_wall_fcx10j.png",
            "description": "A painting on the wall of the cafe.",
            "hint": "abstract painting"
          },
          "moved": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/safe_behind_Painting_dbo6qc.png",
            "description": "The painting has been moved, revealing a wall safe behind it.",
            "hint": "revealed wall safe"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "conditions": [
            {
              "type": "NO_FLAG",
              "flag": "has_moved_painting"
            }
          ],
          "success": {
            "message": "Abstract swirls at first, but linger long enough and the shapes resolve. A city in the 1800s, cobblestone streets slick with dawn rain, street lamps already glowing as the sun sets behind the horizon.\n\nNo people, no horses, nothing moving but shadows stretching along the buildings. Too clean. Too quiet. Too precise. The kind of city that exists only in a painting. It looks like the rain washed the souls down this street and into the canalisation.\n\nYou stare at the painting for a second too long. It makes you feel uneasy, as if itâ€™s trying to tell you something you donâ€™t quite understand yet.\n\nThe frame looks old and authentic, carved with careful detail. Someone spent a lot of time working on this.\n\nBut then you realize something else. It hangs crooked, edges nicked, as if someone nudged it or hung it in a hurry. Somehow it feels out of place in a space like this.\n\nBottom corner you see the signature, small and deliberate: S.B., 1939.\nThose initials again.\n\nYour eye drifts back to the painting and over the street lampsâ€”three on the left, three on the rightâ€”perfectly symmetrical. House numbers? None.\n\nNothing marks a story, a path, a clue, or a location. Yet the precision nags at you, the tilt of the frame, the way it leans against the wall, as if itâ€™s hiding a secret it isnâ€™t ready to show.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759604943/picture_on_wall_fcx10j.png",
              "description": "Abstract painting with S.B. signature",
              "hint": "Frame looks crooked..."
            }
          },
          "fail": {
            "message": "Painting's off the hook now, leaning on the wall. Frame shows the mount. The safe behind it. 'S.B.'â€”feels more significant now.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/safe_behind_Painting_dbo6qc.png",
              "description": "Moved painting revealing wall safe",
              "hint": "The safe was hidden behind it"
            }
          }
        },
        "onTake": {
          "fail": {
            "message": "Too big. Wall art. But you could MOVE it or SEARCH behind it."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's art. For looking at. Try EXAMINING or MOVING it."
          }
        },
        "onOpen": {
          "fail": {
            "message": "It's a painting, not a door. Try MOVING it or SEARCHING behind it."
          }
        },
        "onClose": {
          "fail": {
            "message": "Nothing to close. Try EXAMINING or MOVING it."
          }
        },
        "onMove": {
          "conditions": [
            {
              "type": "NO_FLAG",
              "flag": "has_moved_painting"
            }
          ],
          "success": {
            "message": "You lift the painting off the hook. From behind, you hear the Barista faintly shouting, 'Hey, don't touch this!' but you wonâ€™t stop now. The Barista gives up and turns back to his customers - after all, you are not even the craziest thing he has seen this morning.\n\nHeavier than it looksâ€”real canvas, solid frame, stubborn under your hands. The smell of old paint and dust hits your nose, sharp and electric, mingling with the faint warmth of the cafe. A small splinter breaks off the frame, digging its sharp tip into your skin. If there should be any pain, you donâ€™t feel it right now. Adrenaline masks every sensation.\n\nBehind it, the steel of a wall safe gleams cold and flat, set into the brick like itâ€™s been waiting, patient, for someone curious enough to notice.\n\nA jolt runs through you. Your pulse picks up. The kind of excitement that creeps up slow at first, then grabs you by the gut. You havenâ€™t felt this way in a long timeâ€”so much so, you assumed there was nothing left in the world that could thrill you.\n\nThis find changes everything.\n\nThis isnâ€™t just a wall anymoreâ€”itâ€™s a secret someone tried to bury. For a second, the cafe fades away. The smell of rain on cobblestones, the faint scent of scones, even the hum of conversationâ€”all of it slips as the realization sinks in that youâ€™ve uncovered something hidden. You unveiled something not meant to be discovered.\n\nYour hands linger, hesitant, reverent. Thrill and unease dance together. The quiet of the space presses closer.\nWhoever put this here wanted it concealed.\nWhoever put it here never expected you.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/safe_behind_Painting_dbo6qc.png",
              "description": "Wall safe revealed behind painting",
              "hint": "A safe hidden behind art"
            },
            "effects": [
              {
                "type": "SET_FLAG",
                "flag": "has_moved_painting",
                "value": true
              },
              {
                "type": "REVEAL_FROM_PARENT",
                "entityId": "obj_wall_safe",
                "parentId": "obj_painting"
              },
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "obj_painting",
                "patch": {
                  "isMoved": true,
                  "currentStateId": "moved"
                }
              }
            ]
          },
          "fail": {
            "message": "Already moved. The safe's there. Nothing else behind it."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Vandalism, not investigation. Try MOVING it instead."
          }
        },
        "onRead": {
          "fail": {
            "message": "Abstract art. No text. But there's a signature: 'S.B.' Try EXAMINING or MOVING it."
          }
        },
        "onSearch": {
          "conditions": [
            {
              "type": "NO_FLAG",
              "flag": "has_moved_painting"
            }
          ],
          "success": {
            "message": "You run your hand along the frame edges. It's loose on the hook. Try MOVING it."
          },
          "fail": {
            "message": "Already moved it. The safe's what was hidden."
          }
        },
        "onTalk": {
          "fail": {
            "message": "The painting's silent. But you could EXAMINE or MOVE it."
          }
        },
        "defaultFailMessage": "The painting's part of the scene. Try: EXAMINE, MOVE, or SEARCH behind it."
      },
      "fallbackMessages": {
        "default": "The painting is nice, but it's not a clue.",
        "notMovable": "You can't move the painting, but you could try looking behind it."
      },
      "design": {
        "authorNotes": "Contains the 'S.B.' clue and hides the wall safe.",
        "tags": [
          "painting",
          "art"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.2"
      }
    },
    "obj_wall_safe": {
      "id": "obj_wall_safe",
      "name": "Wall Safe",
      "archetype": "Container",
      "description": "A small, steel safe is set into the wall.",
      "capabilities": {
        "openable": true,
        "lockable": true,
        "breakable": false,
        "movable": false,
        "powerable": false,
        "container": true,
        "readable": false,
        "inputtable": false
      },
      "state": {
        "isOpen": false,
        "isLocked": true,
        "isBroken": false,
        "isPoweredOn": false,
        "currentStateId": "default"
      },
      "inventory": {
        "items": [
          "item_secret_document"
        ],
        "capacity": 1
      },
      "children": {
        "items": [
          "item_secret_document"
        ]
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/safe_behind_Painting_dbo6qc.png",
            "description": "A closed wall safe.",
            "hint": "wall safe"
          },
          "unlocked": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/safe_behind_painting_open_tpmf0m.png",
            "description": "An open wall safe containing a document.",
            "hint": "open safe"
          },
          "unlocked_empty": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761293940/safe_behind_painting_open_empty_pn2js2.png",
            "description": "An open, empty wall safe.",
            "hint": "empty safe"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "conditions": [
            {
              "type": "NO_FLAG",
              "flag": "safe_is_unlocked"
            }
          ],
          "success": {
            "message": "Small. Serious. Steel, flush mount, pro install. Cold. Brass keyhole under the handle. Not residential. Someone needed secure storage, hidden behind art. Lock's pristine.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/safe_behind_Painting_dbo6qc.png",
              "description": "Locked wall safe with keyhole",
              "hint": "Need the key..."
            }
          },
          "fail": {
            "message": "Safe's open. Inside: manila folder. CONFIDENTIAL in red. What someone hid.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/safe_behind_painting_open_tpmf0m.png",
              "description": "Open safe with confidential document",
              "hint": "A secret file"
            }
          }
        },
        "onTake": {
          "fail": {
            "message": "Bolted into brick. Not moving. Try EXAMINING or USING the key on it."
          }
        },
        "onUse": [
          {
            "itemId": "item_safe_key",
            "conditions": [
              {
                "type": "NO_FLAG",
                "flag": "safe_is_unlocked"
              }
            ],
            "success": {
              "message": "Key slides inâ€”perfect fit. One turn. Heavy clunk. Door swings. Inside: manila folder in sleeve. CONFIDENTIAL stamped in red. This is what they hid.",
              "media": {
                "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/safe_behind_painting_open_tpmf0m.png",
                "description": "Safe unlocked revealing secret document",
                "hint": "Someone hid this for a reason"
              },
              "effects": [
                {
                  "type": "SET_FLAG",
                  "flag": "safe_is_unlocked",
                  "value": true
                },
                {
                  "type": "SET_ENTITY_STATE",
                  "entityId": "obj_wall_safe",
                  "patch": {
                    "isLocked": false,
                    "isOpen": true,
                    "currentStateId": "unlocked"
                  }
                },
                {
                  "type": "REVEAL_FROM_PARENT",
                  "entityId": "item_secret_document",
                  "parentId": "obj_wall_safe"
                },
                {
                  "type": "REMOVE_ITEM",
                  "itemId": "item_safe_key"
                }
              ]
            },
            "fail": {
              "message": "Already unlocked. Key served its purpose."
            }
          }
        ],
        "onOpen": {
          "conditions": [
            {
              "type": "NO_FLAG",
              "flag": "safe_is_unlocked"
            }
          ],
          "fail": {
            "message": "Locked tight. Need the key. Try USING the key on it."
          },
          "success": {
            "message": "Already open. TAKE the document inside."
          }
        },
        "onClose": {
          "conditions": [
            {
              "type": "FLAG",
              "flag": "safe_is_unlocked",
              "value": true
            }
          ],
          "success": {
            "message": "You swing the door shut. Metal clangs against frame. But why close it now?"
          },
          "fail": {
            "message": "Already closed and locked."
          }
        },
        "onMove": {
          "fail": {
            "message": "Flush-mounted in brick. Professional install. Not budging."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Steel, pro-grade. You'd need explosives. Try USING the key instead."
          }
        },
        "onRead": {
          "fail": {
            "message": "No text on the safe. Try EXAMINING it or USING the key."
          }
        },
        "onSearch": {
          "conditions": [
            {
              "type": "FLAG",
              "flag": "safe_is_unlocked",
              "value": true
            }
          ],
          "success": {
            "message": "You peer inside. Manila folder in document sleeve. CONFIDENTIAL. TAKE it."
          },
          "fail": {
            "message": "Locked. Can't search a locked safe. Need the key."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Safes don't talk. Try USING the key or EXAMINING it."
          }
        },
        "defaultFailMessage": "That doesn't work on the safe. Try: EXAMINE, USE key, OPEN, or SEARCH it."
      },
      "stateMap": {
        "default": {
          "description": "A small, steel safe is set into the wall. It's locked."
        },
        "unlocked": {
          "description": "The safe is open. Inside, you see a thick confidential file.",
          "overrides": {
            "onExamine": {
              "success": {
                "message": "The safe is open. Inside, you see a thick confidential file."
              },
              "fail": {
                "message": ""
              }
            }
          }
        },
        "unlocked_empty": {
          "description": "You already cracked that safe open. There is nothing left behind.",
          "overrides": {
            "onExamine": {
              "success": {
                "message": "You already cracked that safe open. There is nothing left behind."
              },
              "fail": {
                "message": ""
              }
            }
          }
        }
      },
      "fallbackMessages": {
        "default": "That doesn't work on the safe.",
        "locked": "It's locked tight. We need the wall safe key.",
        "notMovable": "It's built into the wall. It's not going anywhere."
      },
      "design": {
        "authorNotes": "Final puzzle for chapter 1. Opened by the wall safe key from the coffee machine.",
        "tags": [
          "safe"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.1"
      }
    },
    "obj_coffee_machine": {
      "id": "obj_coffee_machine",
      "name": "Coffee Machine",
      "archetype": "Device",
      "description": "It's a high-end Italian coffee machine, gleaming under the cafe lights.",
      "capabilities": {
        "openable": false,
        "lockable": false,
        "breakable": true,
        "movable": false,
        "powerable": false,
        "container": true,
        "readable": false,
        "inputtable": false
      },
      "state": {
        "isOpen": false,
        "isLocked": false,
        "isBroken": false,
        "isPoweredOn": false,
        "currentStateId": "default"
      },
      "inventory": {
        "items": [],
        "capacity": 1
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761211151/coffee_machine_detail_frexuu.png",
            "description": "A high-end Italian coffee machine.",
            "hint": "coffee machine"
          },
          "broken": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761211151/coffee_machine_detail_broken_slkpfd.png",
            "description": "The shattered remains of the coffee machine's side panel.",
            "hint": "broken machine"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "conditions": [
            {
              "type": "NO_FLAG",
              "flag": "machine_is_broken"
            }
          ],
          "success": {
            "message": "Chrome and steel, Italian pride. But wrongâ€”a service panel on the right side, warped. Screws stripped. Someone forced it shut fast. The panel rattles. Wouldn't take much to BREAK it open.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761211151/coffee_machine_detail_frexuu.png",
              "description": "Coffee machine with suspicious service panel",
              "hint": "That panel looks forced shut..."
            }
          },
          "fail": {
            "message": "Shattered panel, broken plastic. The key's gone. Someone hid it here, didn't want it found easy.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761211151/coffee_machine_detail_broken_slkpfd.png",
              "description": "Broken coffee machine with revealed cavity",
              "hint": "The hiding spot is exposed"
            }
          }
        },
        "onTake": {
          "fail": {
            "message": "Bolted to the counter, weighs a ton. Not going anywhere. Try EXAMINING or BREAKING it."
          }
        },
        "onUse": [
          {
            "itemId": "item_iron_pipe",
            "conditions": [
              {
                "type": "NO_FLAG",
                "flag": "machine_is_broken"
              }
            ],
            "success": {
              "message": "Pipe meets panel. Sharp crack. Plastic shatters, metal splits. The cavity opens. Something brass tumbles outâ€”a key. Hidden inside, forced shut. Someone didn't want this found.",
              "media": {
                "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761211151/coffee_machine_detail_broken_slkpfd.png",
                "description": "Broken machine revealing hidden key",
                "hint": "A key was hidden inside"
              },
              "effects": [
                {
                  "type": "SET_FLAG",
                  "flag": "machine_is_broken"
                },
                {
                  "type": "SPAWN_ITEM",
                  "itemId": "item_safe_key",
                  "containerId": "obj_coffee_machine"
                },
                {
                  "type": "SET_ENTITY_STATE",
                  "entityId": "obj_coffee_machine",
                  "patch": {
                    "isBroken": true,
                    "isOpen": true,
                    "currentStateId": "broken"
                  }
                }
              ]
            },
            "fail": {
              "message": "Already broken. One hit was enough."
            }
          }
        ],
        "onOpen": {
          "fail": {
            "message": "Panel's jammed. Screws stripped. You'd need to BREAK it open with something heavy."
          }
        },
        "onClose": {
          "fail": {
            "message": "It's jammed shut already. What you need is to BREAK it."
          }
        },
        "onMove": {
          "fail": {
            "message": "Bolted to the counter. Commercial install. Not going anywhere. Besides, it weighs more than you'd want."
          }
        },
        "onBreak": {
          "fail": {
            "message": "You'd need something heavy to break this open. Like a pipe. Try USING the iron pipe on it."
          }
        },
        "onRead": {
          "fail": {
            "message": "It's a machine, not a manual. Try EXAMINING it."
          }
        },
        "onSearch": {
          "conditions": [
            {
              "type": "FLAG",
              "flag": "machine_is_broken",
              "value": true
            }
          ],
          "success": {
            "message": "The shattered panel reveals the cavity. Empty now. The key's been found."
          },
          "fail": {
            "message": "The panel's sealed tight. You'd need to BREAK it open first."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Machines don't talk back. But you could EXAMINE or BREAK it."
          }
        },
        "defaultFailMessage": "That doesn't work on the machine. Try: EXAMINE, USE iron pipe, BREAK, or SEARCH it."
      },
      "stateMap": {
        "default": {
          "description": "It's a high-end Italian coffee machine. A small service compartment on the side seems to be stuck."
        },
        "broken": {
          "description": "The side panel of the coffee machine is smashed. Amidst the broken plastic, you can see where the key was hidden."
        }
      },
      "fallbackMessages": {
        "default": "That doesn't seem to work on the coffee machine.",
        "notOpenable": "You can't open it. The compartment is jammed shut.",
        "noEffect": "Using that on the coffee machine has no effect."
      },
      "design": {
        "authorNotes": "Breakable object containing the wall safe key. Requires the iron pipe to break.",
        "tags": [
          "machine",
          "coffee"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.1"
      }
    },
    "obj_player_phone": {
      "id": "obj_player_phone",
      "name": "Phone",
      "alternateNames": [
        "phone",
        "smartphone",
        "cell phone",
        "mobile",
        "fbi phone",
        "my phone",
        "fbi smartphone"
      ],
      "archetype": "Device",
      "description": "Your standard-issue FBI smartphone. It has a camera, secure messaging, and a slot for external media.",
      "personal": true,
      "capabilities": {
        "openable": false,
        "lockable": false,
        "breakable": false,
        "movable": false,
        "powerable": true,
        "container": false,
        "readable": true,
        "inputtable": false
      },
      "state": {
        "isOpen": false,
        "isLocked": false,
        "isBroken": false,
        "isPoweredOn": true,
        "currentStateId": "default"
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759604596/FBI_phone_placeholder.png",
            "description": "FBI-issue smartphone",
            "hint": "fbi phone"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "FBI-issue smartphone. Camera, secure messaging, media slot. Standard kit. Always in your pocket."
          }
        },
        "onUse": [
          {
            "itemId": "item_sd_card",
            "success": {
              "message": "Card slides into your phone. Screen flickers. Video loadsâ€”grainy, seventy years old. Music fills the cafe. Saxophone, smooth, melancholic. A tune that's been waiting.\n\nSilas Bloom. Musician. That song for Rose... they were in love. You hear it in every note.\n\nVideo ends. More questions than answers. Your mind races. Then you noticeâ€”the folded newspaper article, still in the notebook. Waiting.",
              "media": {
                "url": "https://res.cloudinary.com/dg912bwcc/video/upload/v1759678377/CH_I_completion_jqtyme.mp4",
                "description": "Video from SD card: Silas Bloom playing saxophone",
                "hint": "The video reveals Silas and Rose"
              },
              "effects": [
                {
                  "type": "SET_ENTITY_STATE",
                  "entityId": "item_sd_card",
                  "patch": {
                    "currentStateId": "opened"
                  }
                },
                {
                  "type": "SET_FLAG",
                  "flag": "notebook_video_watched"
                }
              ]
            },
            "fail": {
              "message": "Already watched. Can't rewatch yet."
            }
          }
        ],
        "onRead": [
          {
            "itemId": "item_sd_card",
            "success": {
              "message": "Card slides into your phone. Screen flickers. Video loadsâ€”grainy, seventy years old. Music fills the cafe. Saxophone, smooth, melancholic. A tune that's been waiting.\n\nSilas Bloom. Musician. That song for Rose... they were in love. You hear it in every note.\n\nVideo ends. More questions than answers. Your mind races. Then you noticeâ€”the folded newspaper article, still in the notebook. Waiting.",
              "media": {
                "url": "https://res.cloudinary.com/dg912bwcc/video/upload/v1759678377/CH_I_completion_jqtyme.mp4",
                "description": "Video from SD card: Silas Bloom playing saxophone",
                "hint": "The video reveals Silas and Rose"
              },
              "effects": [
                {
                  "type": "SET_ENTITY_STATE",
                  "entityId": "item_sd_card",
                  "patch": {
                    "currentStateId": "opened"
                  }
                },
                {
                  "type": "SET_FLAG",
                  "flag": "notebook_video_watched"
                }
              ]
            },
            "fail": {
              "message": "Already watched. Can't rewatch yet."
            }
          }
        ],
        "onOpen": {
          "fail": {
            "message": "Not disassembling it. Try USING it with media cards."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's in your pocket. Always with you."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Bureau property. Not smashing it."
          }
        },
        "defaultFailMessage": "The phone's a tool for reading media. Try: USE [media card] ON PHONE."
      },
      "design": {
        "authorNotes": "Player's primary tool for viewing media. Always accessible.",
        "tags": [
          "phone",
          "device",
          "tool"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "2.0"
      }
    }
  },
  "items": {
    "item_iron_pipe": {
      "id": "item_iron_pipe",
      "name": "Iron Pipe",
      "alternateNames": [
        "iron pipe",
        "pipe",
        "heavy pipe",
        "metal pipe"
      ],
      "archetype": "Tool",
      "description": "A heavy iron pipe. Iron pipes come in handy to open or break things.",
      "capabilities": {
        "isTakable": true,
        "isReadable": false,
        "isUsable": true,
        "isCombinable": false,
        "isConsumable": true,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "state": {
        "currentStateId": "revealed",
        "readCount": 0
      },
      "media": {
        "images": {
          "revealed": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761261134/iron_pipe_bpcofa.png",
            "description": "A heavy iron pipe leaning against the wall behind the chalkboard.",
            "hint": "iron pipe behind chalkboard"
          },
          "taken": {
            "description": "Iron pipe in your possession",
            "hint": "iron pipe taken"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Heavy iron pipe. Cold steel, rust at joints. Solid weight. The kind of tool that solves problems without keys.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761261134/iron_pipe_bpcofa.png",
              "description": "Heavy iron pipe",
              "hint": "Useful for breaking things..."
            }
          }
        },
        "onTake": {
          "success": {
            "message": "Pipe falls into your hands. Heavy. Brutal. Perfect.",
            "effects": [
              {
                "type": "ADD_ITEM",
                "itemId": "item_iron_pipe"
              },
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "item_iron_pipe",
                "patch": {
                  "currentStateId": "taken",
                  "taken": true
                }
              }
            ]
          },
          "fail": {
            "message": "Already have it."
          }
        },
        "onDrop": {
          "success": {
            "message": "You drop the pipe. Clangs on the floor. Always can pick it up later."
          }
        },
        "onUse": {
          "fail": {
            "message": "Pipe's for breaking things. USE it ON somethingâ€”like a jammed panel or stuck lock."
          }
        },
        "onOpen": {
          "fail": {
            "message": "It's a pipe, not a container. Try USING it ON something to break it open."
          }
        },
        "onClose": {
          "fail": {
            "message": "Nothing to close. Try USING it ON something."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's in your hands. Try USING it ON something."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Solid steel. You're not breaking this. It's for breaking OTHER things. Try USING it ON something."
          }
        },
        "onRead": {
          "fail": {
            "message": "No markings. Just a pipe. Try EXAMINING or USING it."
          }
        },
        "onSearch": {
          "fail": {
            "message": "It's a pipe. Solid. Nothing hidden inside. Try USING it ON something."
          }
        },
        "onTalk": {
          "fail": {
            "message": "The pipe's silent. But it speaks volumes when you USE it."
          }
        },
        "defaultFailMessage": "The pipe's a tool. Try: EXAMINE it, or USE it ON an object to break it open."
      },
      "design": {
        "authorNotes": "Tool for breaking objects like the coffee machine.",
        "tags": [
          "pipe"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.0"
      }
    },
    "item_safe_key": {
      "id": "item_safe_key",
      "name": "Wall Safe Key",
      "alternateNames": [
        "safe key",
        "key",
        "small key",
        "ornate key"
      ],
      "archetype": "Key",
      "description": "A small, ornate brass key. It looks like it might fit the wall safe behind the painting.",
      "capabilities": {
        "isTakable": true,
        "isReadable": true,
        "isUsable": true,
        "isCombinable": false,
        "isConsumable": true,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "media": {
        "image": {
          "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761211151/deposit_box_key_f5g2k2.png",
          "description": "A small brass key for the wall safe.",
          "hint": "wall safe key"
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Small brass key. Ornate. No markings. Made for a safe, not a door. Looks like it fits the wall safe.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761211151/deposit_box_key_f5g2k2.png",
              "description": "Brass key for wall safe",
              "hint": "For the wall safe behind the painting"
            }
          }
        },
        "onTake": {
          "success": {
            "message": "Brass key goes in your pocket. One step closer.",
            "effects": [
              {
                "type": "ADD_ITEM",
                "itemId": "item_safe_key"
              },
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "item_safe_key",
                "patch": {
                  "taken": true
                }
              }
            ]
          },
          "fail": {
            "message": "Already have it."
          }
        },
        "onDrop": {
          "success": {
            "message": "Key clinks on the floor. Can pick it up later."
          }
        },
        "onUse": {
          "fail": {
            "message": "USE it ON the wall safe. Key needs a lock."
          }
        },
        "onOpen": {
          "fail": {
            "message": "Keys open locks, not themselves. Try USING it ON the safe."
          }
        },
        "onClose": {
          "fail": {
            "message": "Nothing to close. Try USING it ON the safe."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's in your pocket. Try USING it ON the safe."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Break the key? Then how do you open the safe? Try USING it."
          }
        },
        "onRead": {
          "success": {
            "message": "No markings. No labels. Just brass. Made for the wall safe."
          }
        },
        "onSearch": {
          "fail": {
            "message": "It's a key. Solid brass. Nothing hidden. Try USING it ON the safe."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Keys don't talk. Try USING it ON the safe."
          }
        },
        "defaultFailMessage": "The key's for the wall safe. Try: EXAMINE it, or USE it ON the safe."
      },
      "design": {
        "authorNotes": "Key found inside the broken coffee machine. Opens the wall safe behind the painting.",
        "tags": [
          "key"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.1"
      }
    },
    "item_business_card": {
      "id": "item_business_card",
      "name": "Business Card",
      "alternateNames": [
        "business card",
        "card",
        "musicians card",
        "saxo card",
        "sax card"
      ],
      "archetype": "Personal",
      "description": "A simple business card for a musician. It reads: \"S A X O - The World's Best Sax Player\". A phone number is listed, along with a handwritten number \"1943\" and the name \"ROSE\".",
      "alternateDescription": "The musician's business card. That name, 'ROSE', and the number '1943' seem significant.",
      "capabilities": {
        "isTakable": true,
        "isReadable": true,
        "isUsable": false,
        "isCombinable": false,
        "isConsumable": false,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Business card. Simple. 'S A X O - The World's Best Sax Player'. Phone number. Handwritten: '1943' and 'ROSE'. Clues.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759241477/Screenshot_2025-09-30_at_15.46.02_fuk4tb.png",
              "description": "Business card for saxophone player",
              "hint": "ROSE and 1943 written by hand"
            }
          }
        },
        "onTake": {
          "success": {
            "message": "Card goes in your pocket. S A X O. ROSE. 1943. Pieces of the puzzle."
          },
          "fail": {
            "message": "Already have it."
          }
        },
        "onDrop": {
          "success": {
            "message": "Card drops. Tiny. Can pick it up later."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's a business card. Try READING it or EXAMINING it."
          }
        },
        "onOpen": {
          "fail": {
            "message": "It's flat. Try READING it."
          }
        },
        "onClose": {
          "fail": {
            "message": "Nothing to close. Try READING it."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's in your pocket. Try READING it."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Evidence. Don't destroy it. Try READING it."
          }
        },
        "onRead": {
          "success": {
            "message": "'S A X O - The World's Best Sax Player'. Phone number. Handwritten: '1943' and 'ROSE'. ROSE. That name connects."
          }
        },
        "onSearch": {
          "fail": {
            "message": "It's a card. Flat. Try READING it."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Cards don't talk. Try READING it."
          }
        },
        "defaultFailMessage": "Musician's business card. Clues: ROSE and 1943. Try: EXAMINE or READ it."
      },
      "media": {
        "image": {
          "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759241477/Screenshot_2025-09-30_at_15.46.02_fuk4tb.png",
          "description": "A business card for a saxophone player.",
          "hint": "business card"
        }
      },
      "design": {
        "authorNotes": "Connects to the saxophonist and provides the 'Rose' and '1943' clues.",
        "tags": [
          "card"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.0"
      }
    },
    "item_newspaper_article": {
      "id": "item_newspaper_article",
      "name": "Newspaper Article",
      "alternateNames": [
        "newspaper article",
        "article",
        "newspaper",
        "clipping",
        "news article",
        "old article"
      ],
      "archetype": "Document",
      "description": "A folded newspaper article from the 1940s. The headline is about a local musician, Silas Bloom.",
      "alternateDescription": "The old article about Silas Bloom. The mention of your family name, Macklin, still feels strange.",
      "capabilities": {
        "isTakable": true,
        "isReadable": true,
        "isUsable": false,
        "isCombinable": false,
        "isConsumable": false,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Folded newspaper clipping. 1940s. Brittle, yellowed. Headline about Silas Bloom, local musician.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759241463/Screenshot_2025-09-30_at_15.51.35_gyj3d5.png",
              "description": "Folded newspaper article from the 1940s",
              "hint": "Read it to learn more"
            }
          }
        },
        "onTake": {
          "success": {
            "message": "Article goes in your pocket. Brittle. Old. READ it to find out what it says."
          },
          "fail": {
            "message": "Already have it."
          }
        },
        "onDrop": {
          "success": {
            "message": "Article drifts down. Fragile. Can pick it up later."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's a newspaper. Try READING it."
          }
        },
        "onOpen": {
          "success": {
            "message": "You unfold it. Same as READING it. Try READ article."
          }
        },
        "onClose": {
          "success": {
            "message": "You fold it back up. Already read it anyway."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's in your pocket. Try READING it."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Evidence. Fragile. Don't destroy it. Try READING it."
          }
        },
        "onRead": {
          "success": {
            "effects": [
              {
                "type": "SHOW_MESSAGE",
                "speaker": "narrator",
                "content": "You unfold the clipping. Brittle, yellowed, legible. Ink faded to sepia. Smell of decadesâ€”dust, wood, forgotten time."
              },
              {
                "type": "SHOW_MESSAGE",
                "speaker": "narrator",
                "content": "Newspaper article about Silas Bloom.",
                "messageType": "article",
                "imageId": "item_newspaper_article"
              },
              {
                "type": "SHOW_MESSAGE",
                "speaker": "narrator",
                "content": "Your eyes catch a name: Agent Macklin. FBI. 1940s. Cold realizationâ€”your grandfather. The case that defined his career... or destroyed it. This isn't just evidence. It's family history."
              },
              {
                "type": "SET_FLAG",
                "flag": "notebook_article_read"
              },
              {
                "type": "SET_FLAG",
                "flag": "notebook_interaction_complete"
              }
            ]
          },
          "fail": {
            "message": "Can't read it now."
          }
        },
        "onSearch": {
          "fail": {
            "message": "It's a single article. Try READING it."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Paper doesn't talk. Try READING it."
          }
        },
        "defaultFailMessage": "The article's from the 1940s. Try: EXAMINE it, or READ it."
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759241463/Screenshot_2025-09-30_at_15.51.35_gyj3d5.png",
            "description": "A folded newspaper article.",
            "hint": "folded article"
          },
          "opened": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759241463/Screenshot_2025-09-30_at_15.51.35_gyj3d5.png",
            "description": "An unfolded newspaper article with text visible.",
            "hint": "open article"
          }
        }
      },
      "design": {
        "authorNotes": "Provides the main backstory and a personal connection for the player.",
        "tags": [
          "article",
          "newspaper",
          "clipping"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.0"
      }
    },
    "item_sd_card": {
      "id": "item_sd_card",
      "name": "SD Card",
      "alternateNames": [
        "sd card",
        "card",
        "memory card",
        "sd",
        "media card"
      ],
      "archetype": "Media",
      "description": "A small, modern SD card, looking strangely out of place in the old notebook. It probably fits in your phone.",
      "alternateDescription": "You can \"use SD Card\" to see what's on it.",
      "capabilities": {
        "isTakable": true,
        "isReadable": true,
        "isUsable": true,
        "isCombinable": false,
        "isConsumable": false,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "state": {
        "currentStateId": "closed"
      },
      "media": {
        "images": {
          "closed": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761812524/SD_Card_rokilu.png",
            "description": "A black SD card.",
            "hint": "sd card"
          },
          "opened": {
            "url": "https://res.cloudinary.com/dg912bwcc/video/upload/v1759678377/CH_I_completion_jqtyme.mp4",
            "description": "Video playing from SD card.",
            "hint": "video"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Black SD card. Modern. Out of place in the old notebook. Standard sizeâ€”fits most devices. Your FBI phone has a slot for external media like this.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761812524/SD_Card_rokilu.png",
              "description": "Black SD card",
              "hint": "Your phone can read this"
            }
          }
        },
        "onTake": {
          "success": {
            "message": "SD card goes in your pocket. Modern data in an old mystery."
          },
          "fail": {
            "message": "Already have it."
          }
        },
        "onDrop": {
          "success": {
            "message": "Card drops. Tiny. Black. Can pick it up later."
          }
        },
        "onUse": {
          "fail": {
            "message": "Can't use the card by itself. Your FBI phone has a slot for external mediaâ€”try using your phone."
          }
        },
        "onOpen": {
          "fail": {
            "message": "It's a data card. Try USING it in your phone."
          }
        },
        "onClose": {
          "fail": {
            "message": "Nothing to close. Try USING it."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's in your pocket. Try USING it."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Evidence. Don't destroy it. Try USING it."
          }
        },
        "onRead": {
          "fail": {
            "message": "Can't read the SD card without a device. Your FBI phone has a media slotâ€”try using your phone with the card."
          }
        },
        "onSearch": {
          "fail": {
            "message": "It's a data card. Solid. Try USING it in your phone."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Data doesn't talk. Try USING it."
          }
        },
        "defaultFailMessage": "The SD card holds data. Try: EXAMINE it, or USE it in your phone."
      },
      "design": {
        "authorNotes": "Contains the video clue about Silas Bloom.",
        "tags": [
          "sd card",
          "card"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.1"
      }
    },
    "item_book_deal": {
      "id": "item_book_deal",
      "name": "The Art of the Deal",
      "alternateNames": [
        "art of the deal",
        "deal book",
        "business book",
        "art of deal"
      ],
      "archetype": "Book",
      "description": "A book about business with a gaudy cover.",
      "capabilities": {
        "isTakable": false,
        "isReadable": true,
        "isUsable": false,
        "isCombinable": false,
        "isConsumable": false,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "state": {
        "readCount": 0,
        "currentStateId": "default"
      },
      "media": {
        "images": {
          "default": {
            "url": "https://images.stockcake.com/public/8/2/1/821cc306-132c-48ca-91e9-5d2bb356fc1e_large/ancient-closed-book-stockcake.jpg",
            "description": "A closed book.",
            "hint": "closed book"
          },
          "opened": {
            "url": "https://the-openbook.com/wp-content/uploads/2023/02/cropped-the-open-book-nieuw.jpg?w=780&h=684",
            "description": "An open book.",
            "hint": "open book"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Business book. Gaudy cover. Not relevant."
          }
        },
        "onTake": {
          "fail": {
            "message": "Cafe property. Try READING it."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's a book. Try READING it."
          }
        },
        "onOpen": {
          "success": {
            "message": "Same as READING. Try READ book."
          }
        },
        "onClose": {
          "success": {
            "message": "You close it."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's on the shelf. Try READING it."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Cafe property. Try READING it instead."
          }
        },
        "onRead": {
          "success": {
            "message": "Ghost-written book about a real estate magnate. Not relevant to the case.",
            "effects": [
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "item_book_deal",
                "patch": {
                  "readCount": 1
                }
              }
            ]
          }
        },
        "onSearch": {
          "fail": {
            "message": "It's a book. Try READING it."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Books don't talk. Try READING it."
          }
        },
        "defaultFailMessage": "It's a book on the shelf. Try: EXAMINE or READ it."
      },
      "stateMap": {
        "read0": {
          "description": "It seems to be a ghost-written book about a real estate magnate. Not relevant to the case."
        },
        "read1": {
          "description": "Chapter 1: 'Think Big'. You decide you've thought big enough for one day."
        },
        "read2": {
          "description": "You skim another chapter. It's mostly just self-praise. This isn't helping the case."
        }
      },
      "design": {
        "tags": [
          "book",
          "distraction"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.1"
      }
    },
    "item_book_time": {
      "id": "item_book_time",
      "name": "A Brief History of Time",
      "alternateNames": [
        "brief history of time",
        "history of time",
        "time book",
        "physics book",
        "brief history"
      ],
      "archetype": "Book",
      "description": "A book about physics by a famous scientist.",
      "capabilities": {
        "isTakable": false,
        "isReadable": true,
        "isUsable": false,
        "isCombinable": false,
        "isConsumable": false,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "state": {
        "readCount": 0,
        "currentStateId": "default"
      },
      "media": {
        "images": {
          "default": {
            "url": "https://images.stockcake.com/public/8/2/1/821cc306-132c-48ca-91e9-5d2bb356fc1e_large/ancient-closed-book-stockcake.jpg",
            "description": "A closed book.",
            "hint": "closed book"
          },
          "opened": {
            "url": "https://the-openbook.com/wp-content/uploads/2023/02/cropped-the-open-book-nieuw.jpg?w=780&h=684",
            "description": "An open book.",
            "hint": "open book"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Physics book. Famous scientist. Not relevant."
          }
        },
        "onTake": {
          "fail": {
            "message": "Cafe property. Try READING it."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's a book. Try READING it."
          }
        },
        "onOpen": {
          "success": {
            "message": "Same as READING. Try READ book."
          }
        },
        "onClose": {
          "success": {
            "message": "You close it."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's on the shelf. Try READING it."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Cafe property. Try READING it instead."
          }
        },
        "onRead": {
          "success": {
            "message": "Spacetime theories. Complex. Won't solve murder.",
            "effects": [
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "item_book_time",
                "patch": {
                  "readCount": 1
                }
              }
            ]
          }
        },
        "onSearch": {
          "fail": {
            "message": "It's a book. Try READING it."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Books don't talk. Try READING it."
          }
        },
        "defaultFailMessage": "It's a book on the shelf. Try: EXAMINE or READ it."
      },
      "stateMap": {
        "read0": {
          "description": "Complex theories about spacetime. Unlikely to help you solve a murder."
        },
        "read1": {
          "description": "You read about black holes and event horizons. Your own event horizon feels like it's about five minutes away if you don't get a lead soon."
        },
        "read2": {
          "description": "The book talks about the arrow of time. You wish you could fire an arrow back in time and ask Silas Bloom what happened."
        }
      },
      "design": {
        "tags": [
          "book",
          "distraction"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.1"
      }
    },
    "item_book_justice": {
      "id": "item_book_justice",
      "name": "Justice for My Love",
      "alternateNames": [
        "justice for my love",
        "justice book",
        "romance novel",
        "justice for love",
        "love book"
      ],
      "archetype": "Book",
      "description": "A romance novel with a cheesy cover. The title, \"Justice for My Love\", catches your eye.",
      "capabilities": {
        "isTakable": false,
        "isReadable": true,
        "isUsable": false,
        "isCombinable": false,
        "isConsumable": false,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "state": {
        "readCount": 0,
        "currentStateId": "default"
      },
      "media": {
        "images": {
          "default": {
            "url": "https://images.stockcake.com/public/8/2/1/821cc306-132c-48ca-91e9-5d2bb356fc1e_large/ancient-closed-book-stockcake.jpg",
            "description": "A closed book.",
            "hint": "closed book"
          },
          "opened": {
            "url": "https://the-openbook.com/wp-content/uploads/2023/02/cropped-the-open-book-nieuw.jpg?w=780&h=684",
            "description": "An open book.",
            "hint": "open book"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Romance novel. Cheesy cover. Title: \"Justice for My Love\". That word again."
          }
        },
        "onTake": {
          "fail": {
            "message": "Cafe property. Try READING it."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's a book. Try READING it."
          }
        },
        "onOpen": {
          "success": {
            "message": "Same as READING. Try READ book."
          }
        },
        "onClose": {
          "success": {
            "message": "You close it."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's on the shelf. Try READING it."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Cafe property. Try READING it instead."
          }
        },
        "onRead": {
          "success": {
            "message": "Against better judgment: 'His voice was smooth jazz on rain. Eyes held storms. She knew he'd get justice for her, or die trying.' Justice. Again.",
            "effects": [
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "item_book_justice",
                "patch": {
                  "readCount": 1
                }
              }
            ]
          }
        },
        "onSearch": {
          "fail": {
            "message": "It's a book. Try READING it."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Books don't talk. Try READING it."
          }
        },
        "defaultFailMessage": "Romance novel. 'Justice' in the title. Try: EXAMINE or READ it."
      },
      "stateMap": {
        "read0": {
          "description": "Against your better judgment, you read a page. 'His voice was like smooth jazz on a rainy night, but his eyes held a storm. She knew then that he would get justice for her, or die trying.'"
        },
        "read1": {
          "description": "You flip to a random page. '...and in that moment, she knew their love was a clue, a puzzle box only they could unlock.' You close the book. That's enough of that."
        },
        "read2": {
          "description": "The back cover has a blurb: 'A story of love, loss, and the quest for justice.' The word 'justice' is practically leaping off the page."
        }
      },
      "design": {
        "tags": [
          "book",
          "clue"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.1"
      }
    },
    "item_secret_document": {
      "id": "item_secret_document",
      "name": "Secret Document",
      "alternateNames": [
        "secret document",
        "confidential file",
        "file",
        "document",
        "confidential document",
        "manila folder"
      ],
      "archetype": "Document",
      "description": "A thick manila folder simply marked 'CONFIDENTIAL' in red ink. It feels heavy.",
      "alternateDescription": "The confidential file from the safe. It's filled with complex legal and financial jargon.",
      "capabilities": {
        "isTakable": true,
        "isReadable": true,
        "isUsable": false,
        "isCombinable": false,
        "isConsumable": false,
        "isScannable": false,
        "isAnalyzable": false,
        "isPhotographable": false
      },
      "media": {
        "images": {
          "default": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/Confidential_File_qegnr4.png",
            "description": "A confidential document folder.",
            "hint": "closed document"
          },
          "opened": {
            "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761773132/Screenshot_2025-10-29_at_22.24.23_w9e7vd.png",
            "description": "An open document with text visible.",
            "hint": "open document"
          }
        }
      },
      "handlers": {
        "onExamine": {
          "success": {
            "message": "Manila folder, thick. CONFIDENTIAL stamped in red. Heavy. Feels like secrets.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761263220/Confidential_File_qegnr4.png",
              "description": "Confidential document folder",
              "hint": "Read it to uncover secrets"
            }
          }
        },
        "onTake": {
          "success": {
            "message": "File goes in your hands. Heavy. CONFIDENTIAL. This is what they hid.",
            "effects": [
              {
                "type": "ADD_ITEM",
                "itemId": "item_secret_document"
              },
              {
                "type": "SET_ENTITY_STATE",
                "entityId": "item_secret_document",
                "patch": {
                  "taken": true
                }
              }
            ]
          },
          "fail": {
            "message": "Already have it."
          }
        },
        "onDrop": {
          "success": {
            "message": "File drops. Confidential pages scatter. Can pick it up later."
          }
        },
        "onUse": {
          "fail": {
            "message": "It's a document. Try READING it."
          }
        },
        "onOpen": {
          "success": {
            "message": "You open it. Same as READING. Try READ document."
          }
        },
        "onClose": {
          "success": {
            "message": "You close the folder. Already seen what's inside anyway."
          }
        },
        "onMove": {
          "fail": {
            "message": "It's in your hands. Try READING it."
          }
        },
        "onBreak": {
          "fail": {
            "message": "Evidence. Don't destroy it. Try READING it."
          }
        },
        "onRead": {
          "success": {
            "message": "You open it. Dense. Financial reports, shell corporations, offshore accounts. All linked to one holding company. Hours to untangle this web. But one name repeats: Veridian Dynamics. This is big. Bigger than murder.",
            "media": {
              "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1761773132/Screenshot_2025-10-29_at_22.24.23_w9e7vd.png",
              "description": "Open confidential document revealing financial conspiracy",
              "hint": "Veridian Dynamics appears repeatedly"
            },
            "effects": [
              {
                "type": "SET_FLAG",
                "flag": "has_read_secret_document"
              }
            ]
          },
          "fail": {
            "message": "Can't read it now."
          }
        },
        "onSearch": {
          "success": {
            "message": "You flip through pages. Financial jargon, legal terms. Veridian Dynamics everywhere. Need time to fully analyze this."
          }
        },
        "onTalk": {
          "fail": {
            "message": "Documents don't talk. Try READING it."
          }
        },
        "defaultFailMessage": "The file's marked CONFIDENTIAL. Try: EXAMINE it, READ it, or SEARCH through it."
      },
      "design": {
        "tags": [
          "file",
          "document"
        ]
      },
      "version": {
        "schema": "1.0",
        "content": "1.0"
      }
    }
  },
  "npcs": {
    "npc_barista": {
      "id": "npc_barista",
      "name": "Barista",
      "description": "A tired-looking man in his late 20s, with faded tattoos and a cynical arch to his eyebrow. He seems to have seen a thousand stories like yours and is not easily impressed.",
      "image": {
        "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759241505/Cafe_barrista_hpwona.png",
        "description": "A portrait of the cafe barista.",
        "hint": "male barista"
      },
      "importance": "primary",
      "initialState": {
        "stage": "active",
        "trust": 0,
        "attitude": "neutral"
      },
      "dialogueType": "scripted",
      "persona": "You are a tired, cynical barista in a downtown cafe. You've seen it all and are not impressed by much. Your primary focus is on making coffee and dealing with customers as efficiently as possible. You will not discuss the case or any past events further, deflecting any questions with short, dismissive, but not overly rude answers. You just want to do your job.",
      "welcomeMessage": "What can I get for you? Or are you just here to brood? Either is fine.",
      "goodbyeMessage": "Alright, I've got Pumpkin spice lattes to craft. Good luck with... whatever it is you're doing.",
      "startConversationEffects": [
        {
          "type": "SET_FLAG",
          "flag": "has_talked_to_barista"
        }
      ],
      "limits": {
        "maxInteractions": 15,
        "interactionLimitResponse": "Seriously, I've got a line of customers. I can't keep chatting. The coffee machine calls."
      },
      "demoteRules": {
        "onFlagsAll": [
          "has_received_business_card"
        ],
        "then": {
          "setStage": "demoted",
          "setImportance": "ambient"
        }
      },
      "postCompletionProfile": {
        "welcomeMessage": "Back again? Hope you're buying something this time.",
        "goodbyeMessage": "See ya.",
        "defaultResponse": "Look, I told you what I know. I've got work to do."
      },
      "topics": [
        {
          "topicId": "t_greet",
          "label": "Greeting",
          "keywords": [
            "hello",
            "hi",
            "how are you"
          ],
          "response": {
            "message": "Another day, another dollar. What do you need?"
          }
        },
        {
          "topicId": "t_coffee",
          "label": "Ask about coffee",
          "keywords": [
            "coffee",
            "drink",
            "menu",
            "order",
            "buy",
            "latte",
            "cappuccino",
            "espresso"
          ],
          "response": {
            "message": "The coffee is hot and the pastries are day-old. The menu is on the board. Let me know if you can decipher my handwriting."
          }
        },
        {
          "topicId": "t_prices",
          "label": "Ask about prices",
          "keywords": [
            "price",
            "cost",
            "how much"
          ],
          "response": {
            "message": "More than it should be, less than I want to charge. The prices are on the board."
          }
        },
        {
          "topicId": "t_reco",
          "label": "Ask for recommendation",
          "keywords": [
            "recommend",
            "good",
            "special"
          ],
          "response": {
            "message": "The espresso will wake you up. The scones... well, they exist."
          }
        },
        {
          "topicId": "t_man",
          "label": "Ask about the man in black",
          "keywords": [
            "man",
            "regular",
            "customer",
            "guy",
            "who left",
            "who was sitting here",
            "the man"
          ],
          "response": {
            "message": "The guy in the black coat? Yeah, he's a regular. Comes in, stares at his notebook, doesn't say much. Pays in cash. My favorite kind of customer."
          }
        },
        {
          "topicId": "t_musician",
          "label": "Ask about his job",
          "keywords": [
            "musician",
            "saxophone",
            "job",
            "background",
            "what does he do"
          ],
          "response": {
            "message": "I hear he's a musician. Plays the saxophone out on the corner most days. Keeps to himself, you know?"
          }
        },
        {
          "topicId": "t_notebook",
          "label": "Ask about the notebook",
          "keywords": [
            "notebook",
            "book",
            "his",
            "what was he doing"
          ],
          "response": {
            "message": "Always scribbling in that old notebook of his. Looked like he was writing the next great American novel, or maybe just his grocery list. Who knows."
          }
        },
        {
          "topicId": "t_give_card",
          "label": "Ask about what he left/his name",
          "keywords": [
            "business card",
            "left",
            "name",
            "note",
            "anything else",
            "what did he leave",
            "ask about silas bloom",
            "silas bloom",
            "know his name"
          ],
          "once": true,
          "response": {
            "message": "You know, he left this here the other day. Said I could have it. Some business card. If you're that interested, you can take it. It's just collecting dust.",
            "effects": [
              {
                "type": "ADD_ITEM",
                "itemId": "item_business_card"
              },
              {
                "type": "SET_FLAG",
                "flag": "has_received_business_card"
              },
              {
                "type": "SHOW_MESSAGE",
                "speaker": "narrator",
                "content": "The barista slides a business card across the counter. It's been added to your inventory.",
                "messageType": "image",
                "imageId": "item_business_card"
              },
              {
                "type": "END_CONVERSATION"
              }
            ]
          }
        },
        {
          "topicId": "t_insult",
          "label": "React to insult",
          "keywords": [
            "stupid",
            "idiot",
            "useless",
            "rude",
            "dumb"
          ],
          "response": {
            "message": "Hey, I get paid to pour coffee, not to be your punching bag. Watch it."
          }
        }
      ],
      "fallbacks": {
        "default": "Look, I just work here. I pour coffee, I wipe counters. You're the detective.",
        "noMoreHelp": "I told you all I know. I've got work to do.",
        "offTopic": "I'm not sure what you mean by that."
      },
      "version": {
        "schema": "2.0",
        "content": "1.1"
      }
    },
    "npc_manager": {
      "id": "npc_manager",
      "name": "Cafe Manager",
      "description": "A cheerful woman in her late 40s, with a permanent, slightly-too-wide smile. She radiates a relentless positivity that feels slightly out of place in the grim city.",
      "image": {
        "url": "https://res.cloudinary.com/dg912bwcc/image/upload/v1759604054/cafe_manager_punwhs.png",
        "description": "Portrait of the cafe manager.",
        "hint": "female manager"
      },
      "importance": "ambient",
      "initialState": {
        "stage": "active",
        "trust": 50,
        "attitude": "friendly"
      },
      "dialogueType": "freeform",
      "persona": "You are Brenda, the relentlessly cheerful and bubbly manager of 'The Daily Grind' cafe. You love talking about your 'Artisan Coffee of the Week', the daily specials, and the local community art you hang on the walls. You are completely oblivious to any crime or mystery. Your job is to be a fountain of pleasant, slightly-vacant small talk. Keep your responses short, sweet, and upbeat! Use a wide variety of positive adjectives and avoid repeating words like 'divine'. Use modern currency like dollars and cents.",
      "welcomeMessage": "Welcome to The Daily Grind! How can I make your day a little brighter? Can I interest you in a 'Sunshine Muffin'? They're 10% off!",
      "goodbyeMessage": "Have a wonderfully caffeinated day! Come back soon!",
      "limits": {
        "maxInteractions": 10,
        "interactionLimitResponse": "It has been so lovely chatting with you, but I really must get back to managing. The muffins won't bake themselves, you know! Have a super day!"
      },
      "fallbacks": {
        "default": "Oh, I'm not sure about that, but have you tried our new matcha latte? It's simply wonderful!"
      },
      "version": {
        "schema": "2.0",
        "content": "1.1"
      }
    }
  },
  "chapters": {
    "ch1-the-cafe": {
      "id": "ch1-the-cafe",
      "title": "A Blast from the Past",
      "goal": "Find out what's inside the notebook and the safe.",
      "startingFocus": {
        "entityId": "obj_brown_notebook",
        "entityType": "object"
      },
      "introductionVideo": "https://res.cloudinary.com/dg912bwcc/video/upload/f_mp4/v1759670681/CH_I_Intro_ccy0og.mp4",
      "completionVideo": "https://res.cloudinary.com/dg912bwcc/video/upload/v1759678377/CH_I_completion_jqtyme.mp4",
      "postChapterMessage": "Looks like we've got everything from this place. I'm thinking our next stop should be the jazz club mentioned in the article.",
      "nextChapter": {
        "id": "ch2-the-lounge",
        "title": "The Midnight Lounge",
        "transitionCommand": "go to jazz club"
      },
      "objectives": [
        {
          "flag": "has_talked_to_barista",
          "label": "Talk to the Barista"
        },
        {
          "flag": "has_received_business_card",
          "label": "Get the Business Card"
        },
        {
          "flag": "has_unlocked_notebook",
          "label": "Unlock the Notebook"
        },
        {
          "flag": "notebook_interaction_complete",
          "label": "View the Notebook Contents"
        },
        {
          "flag": "machine_is_broken",
          "label": "Find the hidden key"
        },
        {
          "flag": "safe_is_unlocked",
          "label": "Unlock the wall safe"
        },
        {
          "flag": "has_read_secret_document",
          "label": "Read the secret document"
        }
      ],
      "hints": [
        {
          "flag": "has_talked_to_barista",
          "text": "We haven't spoken to the barista yet. He might have seen who left the notebook."
        },
        {
          "flag": "has_received_business_card",
          "text": "The barista mentioned the man in black was a regular. Maybe he knows more about him, or has something he left behind."
        },
        {
          "flag": "has_unlocked_notebook",
          "text": "The notebook is locked with a phrase. We should examine everything in the cafe for clues. Maybe something on the menu or bookshelf?"
        },
        {
          "flag": "notebook_interaction_complete",
          "text": "We've unlocked the notebook, but we haven't checked what's inside yet. Let's open it and see what we find."
        },
        {
          "flag": "machine_is_broken",
          "text": "That coffee machine looks expensive, but a part of it seems loose. Maybe we can force it open with a tool?"
        },
        {
          "flag": "safe_is_unlocked",
          "text": "There's a safe behind the painting. We found a key in the coffee machine. Let's try using the key on the safe."
        },
        {
          "flag": "has_read_secret_document",
          "text": "The safe is open and we have the document. We need to read it to see what's inside."
        }
      ],
      "startLocationId": "loc_cafe_interior",
      "locations": {},
      "gameObjects": {},
      "items": {},
      "npcs": {}
    }
  },
  "startChapterId": "ch1-the-cafe"
}